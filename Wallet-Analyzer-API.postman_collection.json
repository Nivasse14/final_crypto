{
  "info": {
    "name": "Wallet Analyzer API",
    "description": "Collection Postman pour tester l'API d'analyse de wallets Solana",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "https://xkndddxqqlxqknbqtefv.supabase.co/functions/v1/wallet-analyzer",
      "type": "string"
    },
    {
      "key": "api_key",
      "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhrbmRkZHhxcWx4cWtuYnF0ZWZ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMwMTY3MTEsImV4cCI6MjA2ODU5MjcxMX0.1JfLmuXhKZLhSpIVkoubfaaE9M1jAANoPjKcXZTgPgU",
      "type": "string"
    },
    {
      "key": "test_wallet",
      "value": "HN7cABqLq2oxHxGxQdx5FgAqjygzuWiE3E9LTJMw7LBk",
      "type": "string"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{api_key}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/health",
          "host": ["{{base_url}}"],
          "path": ["health"]
        },
        "description": "V√©rifier le statut de l'API Wallet Analyzer"
      },
      "response": []
    },
    {
      "name": "Quick Analysis - Default Wallet",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/quick/{{test_wallet}}",
          "host": ["{{base_url}}"],
          "path": ["quick", "{{test_wallet}}"]
        },
        "description": "Analyse rapide du wallet par d√©faut"
      },
      "response": []
    },
    {
      "name": "Quick Analysis - Custom Wallet",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/quick/VOTRE_WALLET_ICI",
          "host": ["{{base_url}}"],
          "path": ["quick", "VOTRE_WALLET_ICI"]
        },
        "description": "Analyse rapide d'un wallet personnalis√©. Remplacez VOTRE_WALLET_ICI par l'adresse de votre choix."
      },
      "response": []
    },
    {
      "name": "Complete Analysis - Default Wallet",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/complete/{{test_wallet}}",
          "host": ["{{base_url}}"],
          "path": ["complete", "{{test_wallet}}"]
        },
        "description": "Analyse compl√®te du wallet par d√©faut avec toutes les m√©triques"
      },
      "response": []
    },
    {
      "name": "Complete Analysis - Custom Wallet",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/complete/VOTRE_WALLET_ICI",
          "host": ["{{base_url}}"],
          "path": ["complete", "VOTRE_WALLET_ICI"]
        },
        "description": "Analyse compl√®te d'un wallet personnalis√©. Remplacez VOTRE_WALLET_ICI par l'adresse de votre choix."
      },
      "response": []
    },
    {
      "name": "Test Wallet 1 - HN7cABqL",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/complete/HN7cABqLq2oxHxGxQdx5FgAqjygzuWiE3E9LTJMw7LBk",
          "host": ["{{base_url}}"],
          "path": ["complete", "HN7cABqLq2oxHxGxQdx5FgAqjygzuWiE3E9LTJMw7LBk"]
        },
        "description": "Test avec wallet de r√©f√©rence #1"
      },
      "response": []
    },
    {
      "name": "Test Wallet 2 - A1nCMZqr",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/complete/A1nCMZqrG46Es1jh92dQQisAq662SmxELLLsHHe4YWrH",
          "host": ["{{base_url}}"],
          "path": ["complete", "A1nCMZqrG46Es1jh92dQQisAq662SmxELLLsHHe4YWrH"]
        },
        "description": "Test avec wallet de r√©f√©rence #2"
      },
      "response": []
    },
    {
      "name": "Test Wallet 3 - 9WzDXwBb",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/complete/9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM",
          "host": ["{{base_url}}"],
          "path": ["complete", "9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM"]
        },
        "description": "Test avec wallet de r√©f√©rence #3"
      },
      "response": []
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Script pr√©-requ√™te pour ajouter des logs",
          "console.log('üöÄ Appel API Wallet Analyzer:', pm.request.url.toString());"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Tests automatiques pour chaque requ√™te",
          "pm.test('Status code is 200', function () {",
          "    pm.response.to.have.status(200);",
          "});",
          "",
          "pm.test('Response time is less than 60s', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(60000);",
          "});",
          "",
          "pm.test('Content-Type is application/json', function () {",
          "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "});",
          "",
          "// Tests sp√©cifiques selon l'endpoint",
          "const requestUrl = pm.request.url.toString();",
          "",
          "if (requestUrl.includes('/health')) {",
          "    pm.test('Health check has status', function () {",
          "        const jsonData = pm.response.json();",
          "        pm.expect(jsonData).to.have.property('status');",
          "        console.log('‚úÖ Health Status:', jsonData.status);",
          "    });",
          "}",
          "",
          "if (requestUrl.includes('/quick/')) {",
          "    pm.test('Quick analysis has required fields', function () {",
          "        const jsonData = pm.response.json();",
          "        pm.expect(jsonData).to.have.property('wallet_address');",
          "        pm.expect(jsonData).to.have.property('data_source');",
          "        pm.expect(jsonData).to.have.property('alpha_score');",
          "        console.log('‚ö° Quick Analysis - Score:', jsonData.alpha_score, 'Source:', jsonData.data_source);",
          "    });",
          "}",
          "",
          "if (requestUrl.includes('/complete/')) {",
          "    pm.test('Complete analysis has required structure', function () {",
          "        const jsonData = pm.response.json();",
          "        pm.expect(jsonData).to.have.property('data_source');",
          "        pm.expect(jsonData).to.have.property('data');",
          "        pm.expect(jsonData.data).to.have.property('alpha_analysis');",
          "        pm.expect(jsonData.data).to.have.property('trade_analysis');",
          "        pm.expect(jsonData.data).to.have.property('copy_trading_recommendations');",
          "        ",
          "        const alpha = jsonData.data.alpha_analysis;",
          "        const trade = jsonData.data.trade_analysis;",
          "        const recommendation = jsonData.data.copy_trading_recommendations;",
          "        ",
          "        console.log('üéØ Complete Analysis Summary:');",
          "        console.log('   Source:', jsonData.data_source);",
          "        console.log('   Alpha Score:', alpha.alpha_score + '/10');",
          "        console.log('   PnL:', trade.total_pnl_usd ? '$' + trade.total_pnl_usd.toLocaleString() : 'N/A');",
          "        console.log('   Win Rate:', trade.win_rate ? trade.win_rate.toFixed(1) + '%' : 'N/A');",
          "        console.log('   Recommendation:', recommendation.recommendation);",
          "        console.log('   Allocation:', recommendation.suggested_allocation_percentage + '%');",
          "    });",
          "}"
        ]
      }
    }
  ]
}
